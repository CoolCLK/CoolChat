<!DOCTYPE HTML>
<html lang="zh" xmlns="http://www.w3.org/1999/html">
    <head>
        <meta charset="UTF-8">
        <!–[if lt IE 9]>
        <script src=”http://css3-mediaqueries-js.googlecode.com/svn/trunk/css3-mediaqueries.js”></script>
        <![endif]–>
        <meta name="viewport" content="width = device-width, initial-scale = 1.0, maximum-scale = 1.0, minimum-scale = 1.0, user-scalable = no">
        <link rel="shortcut icon" href="../pic/user_favicon.svg">
        <title>登录</title>
        <style type="text/css">
            @import url('../css/style.css');
        </style>
        <script src="./js/api.js"></script>
        <script type="text/javascript">
            window.onload = function() {
                const json = JSON.parse(getApi('api/checkLogin'));
                if (json["status"] == 1) {
                    window.location.href = '../';
                }
            }

            loginFunction = function() {
                const json = JSON.parse(getApi('api/login?account=' + document.getElementById('userLoginAccount').value + '&password=' + document.getElementById('userLoginPassword').value + '&remember=' + document.getElementById('userLoginRemember').checked));
                document.getElementById('loginRequest').innerText = json['message'];
                if (json["status"] == 1) {
                    window.location.reload();
                }
                else if (json["status"] == 3) {
                    document.getElementById('loginRequest').innerText = "等一下...你怎么绕过登录检测的";
                }
            }

            registerFunction = function() {
                const json = JSON.parse(getApi('api/register?account=' + document.getElementById('userLoginAccount').value + '&password=' + document.getElementById('userLoginPassword').value + '&nickname=' + document.getElementById('userRegisterNickname').value);
                document.getElementById('loginRequest').innerText = json['message'];
                if (json["status"] == 1) {
                    window.location.reload();
                }
            }
        </script>
    </head>
    <body>
        <div id="registerBox" class="login-div" style="display: none;">
            <div style="position: absolute;
                        left: 50%;
                        top: 50%;
                        translate: -50% -50%;">
                <a style="font-weight: bold; font-size: 125%;">注册</a><br>
                <input id="userRegisterAccount" type="text" class="login-textbox" placeholder="用户账号" /><br>
                <input id="userRegisterPassword" type="password" class="login-textbox" placeholder="用户密码" /><br>
                <input id="userRegisterNickname" type="text" class="login-textbox" placeholder="用户昵称（可选）" /><br>
                <span id="registerRequest" style="color: rgb(255, 0, 0); font-size: 50%;"></span>
                <input type="submit" class="login-button" value="注册" onclick="registerFunction();" />
                <input type="submit" class="login-button" value="登录" onclick="document.getElementById('registerBox').style.display = 'none'; document.getElementById('loginBox').style.display = 'block';" />
            </div>
        </div>
        <div id="loginBox" class="login-div" style="display: block;">
            <div style="position: absolute;
                        left: 50%;
                        top: 50%;
                        translate: -50% -50%;">
                <a style="font-weight: bold; font-size: 125%;">登录</a><br>
                <input id="userLoginAccount" type="text" class="login-textbox" placeholder="用户账号" /><br>
                <input id="userLoginPassword" type="password" class="login-textbox" placeholder="用户密码" /><br>
                <input id="userLoginRemember" type="checkbox" checked="true" /><a>记住我</a>
                <span id="loginRequest" style="color: rgb(255, 0, 0); font-size: 50%;"></span><br>
                <input type="submit" class="login-button" value="注册" onclick="document.getElementById('registerBox').style.display = 'block'; document.getElementById('loginBox').style.display = 'none';" />
                <input type="submit" class="login-button" value="登录" onclick="loginFunction();" />
            </div>
        </div>
    </body>
</html>